##
## example use of epics monitor callbacks.
##
import LibEpics
import time
def my_callback(pv):
    print ' PV Changed: ', pv.pvname, pv.value
enddef

v = _epics.pv('13BMA:DMM1Ch2_calc.VAL')

_epics.set_callback(pv=v,callback=my_callback)

print ' Waiting for changes: '
for i in range(500):
    _epics.pend_event(0.25)
    sleep(0.1)


endfor

print 'Done!'

